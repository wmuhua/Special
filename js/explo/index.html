<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			margin:0;
			padding:0;
			list-style: none;
		}
		body{
			overflow-y:hidden;
		}
		img{
			width: 640px;
			height: 400px;
		}
		#dv1{
			width: 640px;
			height: 400px;
			position:absolute;
			left:50%;
			margin-left:-320px;
			top:50%;
			margin-top:-200px;
		}
		#dv1>div{
			position:absolute;
			width: 100%;
			height: 100%;
			top:0;left:0;
			transform-style:preserve-3d;
			font-size:0;
		}
		#dv1>div>div{
			position: absolute;
			background-color: #fff;
			transform:perspective(800px);
		}
	</style>
</head>
<body>
	<div id="dv1">		
	</div>
	<script type="text/javascript">
		

		var z = 99999;
		var index = 0;
		var arr = ['images/1.jpg','images/2.jpg','images/3.jpg','images/4.jpg','images/5.jpg'];

		boom(10,10);
		function boom(l,t){
			var div1 = document.getElementById('dv1');
			var oParentNode = document.createElement('div');
			oParentNode.style.zIndex = z;
			z--;
			div1.appendChild(oParentNode);
			var x = l;//横着个数
			var y = t;//竖的个数
			for(var i = 0;i<y;i++){
				for(var j = 0;j<x;j++){
					var oDiv = document.createElement('div');
					oDiv.style.backgroundImage = 'url('+arr[index]+')';
					oDiv.style.width = div1.clientWidth/x+'px';
					oDiv.style.height = div1.clientHeight/y+'px';			
					//1->0 *j  width*j  =0 
					//2->-80 *j width*j =80 
					// 3->-160 *j  width*j =160
					oDiv.style.left = (div1.clientWidth/x)*j+'px';
					oDiv.style.top = (div1.clientHeight/y)*i+'px';
					oDiv.style.backgroundPositionX = (div1.clientWidth/x)*-j+'px';
					oDiv.style.backgroundPositionY = (div1.clientHeight/y)*-i+'px';
					oDiv.style.transition = (Math.random()*1+1)+'s';
					oParentNode.appendChild(oDiv);
				}
			}
			var allDiv = oParentNode.children;
			setTimeout(function(){	
				index++;
				// index%=arr.length;
				index == arr.length && (index=0);
				boom(l,t);		
				for (var i = 0; i < allDiv.length; i++) {
					allDiv[i].style.transform = 'perspective(800px) rotateX('+(Math.random()*360)+'deg) rotateY('+(Math.random()*360)+'deg) translateX('+(Math.random()*5+5)+'px) scale('+(Math.random()*1.1+1.1)+') translateY('+(Math.random()*5+5)+'px) translateZ('+(Math.random()*300+180)+'px)';
					// allDiv[i].style.transform = 'perspective(800px) rotateX('+(Math.random()*360+180)+'deg) rotateY('+(Math.random()*360+180)+'deg) scale('+(Math.random()*1.1+1.1)+') translateX(0px) translateY(0px) translateZ('+(Math.random()*300+150)+'px)';
					allDiv[i].style.opacity -= 0.01;
				}
			},2000);
			// boom(l,t);
			setTimeout(function(){
				// for(var i = 0;i<allDiv.length;i++){
				// 	div1.removeChild(allDiv[i]);				
				// }
				// div1.innerHTML = '';
				oParentNode.remove();
				// boom(8,5);
			},3500);
		}

























		// var x = 8;//横着个数
		// var y = 5;//竖的个数
		// var div1 = document.getElementById('dv1');
		// for(var i = 0;i<y;i++){
		// 	for(var j = 0;j<x;j++){
		// 		var oDiv = document.createElement('div');
		// 		oDiv.style.backgroundImage = 'url(images/1.jpg)';
		// 		oDiv.style.width = div1.clientWidth/x+'px';
		// 		oDiv.style.height = div1.clientHeight/y+'px';
		// 		//1->0 *j  width*j  =0 
		// 		//2->-80 *j width*j =80 
		// 		// 3->-160 *j  width*j =160
		// 		oDiv.style.left = (div1.clientWidth/x)*j+'px';
		// 		oDiv.style.top = (div1.clientHeight/y)*i+'px';
		// 		oDiv.style.backgroundPositionX = (div1.clientWidth/x)*-j+'px';
		// 		oDiv.style.backgroundPositionY = (div1.clientHeight/y)*-i+'px';
		// 		oDiv.style.transition = (Math.random()*1+0.5)+'s';
		// 		div1.appendChild(oDiv);
		// 	}
		// }
		// var allDiv = div1.children;
		// for (var i = 0; i < allDiv.length; i++) {
		// 	allDiv[i].style.transform = 'perspective(800px) rotateX('+(Math.random()*360-180)+'deg) rotateY('+(Math.random()*360-180)+'deg) translateX('+(Math.random()*400-200)+'px) translateY('+(Math.random()*400-200)+'px) translateZ('+(Math.random()*200+100)+'px)';
		// 	allDiv[i].style.opacity = 0;
		// }
		// setTimeout(function(){
		// 	// for(var i = 0;i<allDiv.length;i++){
		// 	// 	div1.removeChild(allDiv[i]);				
		// 	// }
		// 	div1.innerHTML = '';
		// },1500);
		// setTimeout(function(){
		// 	for (var i = 0; i < allDiv.length; i++) {
		// 	allDiv[i].style.transform = 'perspective(800px) rotateX(0deg) rotateY(0deg) translateX(0px) translateY(0px) translateZ(0px)';
		// 	}
		// },3000);
		// scale('+(Math.random()*1.3+1.2)+')
	
	</script>
</body>
</html>